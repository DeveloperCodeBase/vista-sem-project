# شبکه هوشمند ابتکار ویستا (Vista Smart Network)

یک لندینگ دوزبانه بر پایه Next.js 14 و TailwindCSS که مطالعات موردی هوش مصنوعی شرکت «شبکه هوشمند ابتکار ویستا» را معرفی می‌کند. رابط کاربری شامل کروسل‌های پروژه، خلاصه‌های مدیریتی ساختارمند، مودال جزئیات و فرم تماس دو زبانه است. تمام دارایی‌های بصری به صورت محلی (SVG) در مخزن نگهداری می‌شوند.

## پیش‌نیازها

| ابزار | حداقل نسخه | توضیحات |
| --- | --- | --- |
| [Node.js](https://nodejs.org/) | 18.17 یا جدیدتر | شامل `npm` و Corepack برای مدیریت Yarn |
| [Yarn](https://yarnpkg.com/) | 1.22 (Classic) | توصیه می‌شود با Corepack فعال شود: `corepack enable && corepack prepare yarn@1.22.22 --activate` |

> **نکته:** اگر ترجیح می‌دهید از `npm` استفاده کنید، فایل `yarn.lock` را حفظ کنید و فرمان‌ها را به معادل `npm` تبدیل نمایید.

## نصب و اجرای محیط توسعه

```bash
# نصب وابستگی‌ها
corepack enable
yarn install

# اجرای سرور توسعه
yarn dev
# آدرس: http://localhost:3000
```

با اجرای دستور بالا:
- صفحه فارسی در `/` و نسخه انگلیسی در `/en` قابل مشاهده است.
- لینک «مشاهده خلاصه مدیریتی» مودال قابل دسترس با Trap فوکوس را باز می‌کند.
- دکمه‌های منو اسکرول نرم به سکشن‌های صفحه دارند.

## معماری پروژه

- `app/` – ساختار App Router (Next.js) شامل صفحات فارسی و انگلیسی، استایل‌های سراسری و API محلی.
- `components/` – اجزای رابط کاربری (Header، Hero، Carousel، Modal، فرم تماس و ...).
- `data/projects.ts` – ۱۳ مطالعه‌ی موردی با HTML کامل، گالری SVG و متادیتای دو زبانه.
- `lib/` – توابع کمکی از جمله ذخیره‌سازی لوکال درخواست‌های تماس.
- `public/images/` – تمامی تصاویر و لوگوهای SVG مورد استفاده در صفحات.

## ارسال درخواست تماس (کاملاً محلی)

فرم تماس در هر دو زبان به مسیر `POST /api/contact` متصل است. پیاده‌سازی سمت سرور هیچ وابستگی خارجی ندارد و داده‌ها را در فایل JSON محلی ذخیره می‌کند:

- مسیر ذخیره‌سازی: `data/contact-submissions.json`
- ساختار هر رکورد:
  ```json
  {
    "id": "uuid",
    "name": "نام کاربر",
    "phone": "شماره تماس",
    "email": "ایمیل اختیاری",
    "project": "حوزه مورد نظر",
    "message": "شرح درخواست",
    "createdAt": "2024-01-01T12:34:56.000Z"
  }
  ```
- برای مشاهده درخواست‌های ثبت‌شده می‌توانید فایل فوق را مستقیماً باز کنید یا تابع `listContactRequests()` در `lib/contactStore.ts` را در اسکریپت‌های مدیریتی فراخوانی نمایید.

### اعتبارسنجی ورودی

API سمت سرور فیلدهای `name`، `phone`، `project` و `message` را الزامی می‌داند و در صورت نبود هر کدام پاسخ `400` با بدنه‌ی `{"error":"MISSING_FIELDS"}` باز می‌گرداند. سمت کلاینت خطاها را مدیریت کرده و پیام مناسب نمایش می‌دهد.

### کتابخانه‌ها و ماژول‌های مورد نیاز

تمام امکانات تماس با بسته‌های پیش‌فرض Node.js (`fs`, `path`, `crypto`) پیاده‌سازی شده است؛ بنابراین نیازی به نصب کتابخانه اضافی یا تنظیم کلیدهای API وجود ندارد.

## ساخت خروجی Production

### ۱. Build و اجرای محلی Production

```bash
# تولید خروجی Production
yarn build

# اجرای سرور Production (با Next.js)
yarn start
# به صورت پیش‌فرض روی http://localhost:3000 اجرا می‌شود
```

### ۲. استقرار روی Windows

1. [نصب Node.js LTS](https://nodejs.org/) (شامل npm و Corepack).
2. باز کردن PowerShell یا CMD و اجرای دستورات:
   ```powershell
   corepack enable
   yarn install --frozen-lockfile
   yarn build
   yarn start
   ```
3. برای اجرای به عنوان سرویس می‌توانید از `nssm` یا Task Scheduler استفاده کنید و دستور `yarn start` را پس از بوت اجرا کنید.
4. در صورت نیاز به Reverse Proxy (مثلاً IIS یا Nginx روی Windows)، ترافیک پورت 80 را به `http://127.0.0.1:3000` هدایت کنید.

### ۳. استقرار روی Ubuntu/Debian

1. نصب وابستگی‌ها:
   ```bash
   sudo apt update
   sudo apt install -y curl build-essential
   curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -
   sudo apt install -y nodejs
   corepack enable
   ```
2. در پوشه پروژه:
   ```bash
   yarn install --frozen-lockfile
   yarn build
   yarn start
   ```
3. برای اجرای پایدار می‌توانید یک سرویس systemd بسازید (به عنوان مثال `/etc/systemd/system/vista.service`) که دستور `yarn start` را در شاخه پروژه اجرا کند.
4. جهت ارائه به اینترنت از Nginx به عنوان Reverse Proxy با SSL استفاده کنید و روت `/` را به `http://127.0.0.1:3000` متصل نمایید.

## متغیرهای محیطی و کلیدها

- در نسخه فعلی، فرم تماس و سایر بخش‌ها بدون هیچ کلید یا سرویس خارجی کار می‌کنند.
- در صورت نیاز به هم‌پوشانی با سرویس‌های بیرونی (ایمیل، CRM و ...)، می‌توانید از `lib/contactStore.ts` به عنوان پایه استفاده کرده و منطق شخصی خود را اضافه کنید. توصیه می‌شود متغیرهای محیطی احتمالی در فایل `.env.local` تعریف شوند و در README یا مستندات داخلی ثبت شوند.

## تست و کیفیت

- `yarn lint` — اجرای ESLint.
- `yarn test` — (در صورت اضافه شدن تست‌ها) جایگاه اجرای تست‌های واحد/یکپارچه.
- `yarn build` — بررسی نهایی جهت تولید.

> در حال حاضر تست خودکار تعریف نشده است؛ برای انتشار در محیط Production توصیه می‌شود تست دستی صفحات اصلی و ارسال فرم تماس انجام شود.

## سوالات متداول

- **فایل فونت IRANSans لازم است؟** خیر، سیستم از فونت Vazirmatn و فونت‌های سیستم به عنوان fallback استفاده می‌کند. در صورت تمایل می‌توانید فایل فونت دلخواه را در `public/fonts` قرار داده و در `app/globals.css` تعریف کنید.
- **چطور درخواست‌های ذخیره‌شده را پاک کنم؟** فایل `data/contact-submissions.json` را حذف یا محتویات آن را خالی کنید. API در صورت نبود فایل، هنگام اولین ارسال آن را دوباره ایجاد می‌کند.
- **چگونه داده‌های پروژه را به‌روزرسانی کنم؟** ساختار هر پروژه در `data/projects.ts` تعریف شده است. برای افزودن پروژه جدید کافی است یک شیء جدید با فیلدهای هم‌تراز اضافه کنید و در صورت نیاز SVGهای مرتبط را در `public/images/projects/<slug>/` قرار دهید.

## مجوز و استفاده

این مخزن برای نمایش نمونه‌کارهای هوش مصنوعی شبکه هوشمند ابتکار ویستا طراحی شده است. انتشار عمومی با حفظ حقوق مالکیت تصاویر و متون انجام می‌شود. برای همکاری یا سوالات بیشتر از بخش تماس استفاده نمایید.
